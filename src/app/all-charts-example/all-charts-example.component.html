<section class="page-shell">
  <nav class="nav-3d">
    <div class="brand">
      <span class="brand-mark">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M11 2v20M2 11h20M6.8 21.4A10 10 0 1 1 21.4 17.2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </span>
      <div>
        <p class="eyebrow">All charts deck</p>
        <p class="brand-title">Compensation Visual Lab</p>
      </div>
    </div>
    <div class="nav-links">
      <a href="#hero">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Overview
      </a>
      <a href="#chart-gallery">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M18 20V10M12 20V4M6 20v-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Charts
      </a>
      <a href="#about">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
          <path d="M12 16v-4M12 8h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        About
      </a>
    </div>
    <div class="nav-actions">
      <div class="search-wrap">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
          <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <input
          type="search"
          placeholder="Search charts..."
          [(ngModel)]="searchTerm"
          (keydown.enter)="scrollToFirstMatch()"
          (focus)="onSearchFocus()"
          (blur)="onSearchBlur()"
          (input)="onSearchInput()"
        />
        <div class="search-dropdown" *ngIf="showSearchDropdown && searchTerm.trim()">
          <div class="search-results" *ngIf="filteredCards.length > 0">
            <div 
              class="search-result-item" 
              *ngFor="let chart of filteredCards"
              (click)="selectSearchResult(chart)"
            >
              <div class="search-result-preview">
                <img 
                  [src]="chart.previewImage || 'https://www.chartjs.org/img/chartjs-logo.svg'" 
                  [alt]="chart.title + ' preview'"
                  class="preview-image"
                />
              </div>
              <div class="search-result-info">
                <div class="search-result-title">{{ chart.title }}</div>
                <div class="search-result-tag">{{ chart.tag }}</div>
              </div>
            </div>
          </div>
          <div class="search-no-results" *ngIf="filteredCards.length === 0">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
              <path d="M12 8v4M12 16h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <div class="no-results-text">
              <strong>No charts found</strong>
              <span>Try searching for "bar", "line", or "pie"</span>
            </div>
          </div>
        </div>
      </div>
      <button class="btn ghost" (click)="toggleTheme()">
        <svg *ngIf="!isLightMode" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <svg *ngIf="isLightMode" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"/>
          <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        {{ isLightMode ? 'Dark' : 'Light' }}
      </button>
      <a class="btn primary" href="https://www.linkedin.com/in/marwane-lachhab/?originalSubdomain=ma" target="_blank" rel="noreferrer">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6zM2 9h4v12H2z" fill="currentColor"/>
          <circle cx="4" cy="4" r="2" fill="currentColor"/>
        </svg>
        Connect
      </a>
    </div>
  </nav>

  <header id="hero" class="hero">
    <div class="hero-copy">
      <p class="eyebrow">Portfolio · Documentation · Charts</p>
      <h1>Hi, I'm Marwane Lachhab — I craft pay analytics with bold 3D visuals.</h1>
      <p class="lede">
        This hub is a portfolio + documentation wall. Explore every payroll-ready chart, learn when to use it,
        read the snippet, and copy it instantly. Built with Angular best practices.
      </p>
      <div class="hero-actions">
        <a href="#chart-gallery" class="btn primary">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M15 3h6v6M10 14L21 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Browse the chart wall
        </a>
        <a href="#about" class="btn ghost">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Why these visuals?
        </a>
      </div>
      <div class="socials">
        <a class="social" href="https://www.linkedin.com/in/marwane-lachhab/?originalSubdomain=ma" target="_blank" rel="noreferrer">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6zM2 9h4v12H2z" fill="currentColor"/>
            <circle cx="4" cy="4" r="2" fill="currentColor"/>
          </svg>
          LinkedIn
        </a>
        <a class="social" href="https://github.com/MarwaneLachhab" target="_blank" rel="noreferrer">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          GitHub
        </a>
      </div>
      <div class="hero-alert" role="alert">
        Live code, copyable snippets, detail pages, and theme toggle baked in.
      </div>
    </div>
    <div class="hero-visual">
      <div class="orb orb-a"></div>
      <div class="orb orb-b"></div>
      <div class="hero-card">
        <div class="hero-card-header">
          <p class="eyebrow">Payroll snapshot</p>
          <span class="pill">3D glass</span>
        </div>
        <p class="hero-metric">$1.84M</p>
        <p class="muted">This month’s projected payroll burn across teams</p>
        <div class="hero-progress">
          <div class="fill"></div>
        </div>
        <div class="hero-tags">
          <span class="pill soft">Base pay</span>
          <span class="pill soft">Bonus</span>
          <span class="pill soft">Equity</span>
        </div>
      </div>
    </div>
  </header>

  <section class="profile">
    <div class="profile-card">
      <img src="assets/Marwane.jpeg" alt="Marwane Lachhab portrait" class="profile-photo" />
      <div class="profile-copy">
        <p class="eyebrow">About the creator</p>
        <h2>Marwane Lachhab — building crisp, copyable chart docs.</h2>
        <p class="muted">
          I pair Angular structure with Chart.js visuals and documentation-first UI. Every chart is explained,
          copyable, and paired with a detail page for deep dives.
        </p>
        <div class="socials">
          <a class="social" href="https://www.linkedin.com/in/marwane-lachhab/?originalSubdomain=ma" target="_blank" rel="noreferrer">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6zM2 9h4v12H2z" fill="currentColor"/>
              <circle cx="4" cy="4" r="2" fill="currentColor"/>
            </svg>
            LinkedIn
          </a>
          <a class="social" href="https://github.com/MarwaneLachhab" target="_blank" rel="noreferrer">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            GitHub
          </a>
        </div>
      </div>
    </div>
  </section>

  <section id="about" class="info-panel">
    <div class="info-copy">
      <h2>The new angle: charts built for payroll stories.</h2>
      <p class="muted">
        Each visualization is tuned to a pay scenario: headcount costs drifting month over month, bonus
        mix comparisons, or benefit splits. Hover and scroll to see soft 3D motion and neon depth.
      </p>
    </div>
    <div class="info-stats">
      <div class="stat-card">
        <p class="label">Interaction</p>
        <p class="value">3D</p>
        <p class="muted">Floating nav, springy buttons, layered cards</p>
      </div>
      <div class="stat-card">
        <p class="label">Code access</p>
        <p class="value">1 click</p>
        <p class="muted">Reveal ready-to-use Chart.js snippets per chart</p>
      </div>
      <div class="stat-card">
        <p class="label">Purpose</p>
        <p class="value">Payroll</p>
        <p class="muted">Every chart explained with why you’d pick it</p>
      </div>
    </div>
  </section>

  <section class="story-panel">
    <div class="story-card">
      <p class="eyebrow">Portfolio snapshot</p>
      <h3>Angular-first, Chart.js-powered, neon 3D.</h3>
      <p class="muted">
        I build interactive compensation visuals with reusable components, accessible contrast, and instant copyable docs.
        Browse the gallery, then open a chart’s dedicated documentation page to see its setup and usage notes.
      </p>
    </div>
    <div class="story-grid">
      <div class="story-tile">
        <p class="label">Docs mode</p>
        <h4>Copy + explain</h4>
        <p class="muted">Every chart ships with a code block and a plain-language “why use this” blurb.</p>
      </div>
      <div class="story-tile">
        <p class="label">Search</p>
        <h4>Find fast</h4>
        <p class="muted">Use the navbar search to filter by title, tag, or description instantly.</p>
      </div>
      <div class="story-tile">
        <p class="label">Detail pages</p>
        <h4>Deep dives</h4>
        <p class="muted">Open a dedicated page for each chart with docs, code, and a live render.</p>
      </div>
    </div>
  </section>

  <section id="chart-gallery" class="charts-section">
    <div class="section-header">
      <h2>Interactive Chart Gallery</h2>
      <p class="section-subtitle">Full-screen visualizations with live data rendering</p>
    </div>
    
    <div class="chart-showcase" *ngFor="let chart of filteredCards; let i = index">
      <div class="showcase-header">
        <div class="showcase-meta">
          <span class="showcase-tag">{{ chart.tag }}</span>
          <h3>{{ chart.title }}</h3>
          <p class="showcase-description">{{ chart.about }}</p>
        </div>
        <div class="showcase-actions">
          <a class="btn-icon" [routerLink]="['/charts', chart.id]" title="View Details">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
            </svg>
          </a>
          <a class="btn-icon" [routerLink]="['/docs', chart.id]" title="Documentation">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
          <button class="btn-icon" (click)="toggleCodePanel(chart.id)" title="View Code">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="m16 18 6-6-6-6M8 6l-6 6 6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button class="btn-icon" (click)="exportChartAsPNG(chart.id)" title="Export as PNG">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button class="btn-icon" (click)="exportChartCSV(chart.id)" title="Export as CSV">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2"/>
              <path d="M14 2v6h6M12 18v-6M9 15l3 3 3-3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>
      
      <div class="showcase-content" [class.split-view]="isCodePanelVisible(chart.id)">
        <div class="showcase-canvas-wrapper">
          <canvas class="showcase-canvas" [attr.id]="chart.id"></canvas>
        </div>
        
        <div class="code-panel" *ngIf="isCodePanelVisible(chart.id)">
          <div class="code-panel-header">
            <span class="code-label">{{ chart.title }} - Implementation</span>
            <button class="btn-icon-small" (click)="toggleCodePanel(chart.id)">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
          <pre><code [innerHTML]="highlightCode(chart.snippet)"></code></pre>
        </div>
      </div>
      
      <div class="showcase-info">
        <div class="info-block">
          <h4>When to use</h4>
          <p>{{ chart.why }}</p>
        </div>
        <div class="info-actions">
          <button class="btn ghost" (click)="toggleCodePanel(chart.id)">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="m16 18 6-6-6-6M8 6l-6 6 6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            {{ isCodePanelVisible(chart.id) ? 'Hide Code' : 'View Code' }}
          </button>
          <button class="btn primary" (click)="copyChartCode(chart.id)">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            {{ isCopied(chart.id) ? 'Copied!' : 'Copy Code' }}
          </button>
        </div>
      </div>
    </div>
  </section>

  <section class="workflow">
    <div class="workflow-card">
      <p class="eyebrow">How to use</p>
      <ol>
        <li>Search or browse the gallery to pick a chart style.</li>
        <li>Click “See the code” to copy the snippet immediately.</li>
        <li>Open the chart page for documentation and design notes.</li>
      </ol>
      <p class="muted">Need custom data? Swap labels/datasets and keep the styling intact.</p>
    </div>
    <div class="workflow-card">
      <p class="eyebrow">Highlights</p>
      <ul>
        <li>Readable contrast on both dark and light themes.</li>
        <li>Responsive nav/hero, expanded spacing between cards.</li>
        <li>Reusable `ChartCardComponent` for clean Angular structure.</li>
      </ul>
    </div>
  </section>

  <footer class="footer">
    <div class="footer-left">
      <div class="footer-profile">
        <img src="assets/Marwane.jpeg" alt="Marwane Lachhab" class="footer-photo" />
        <div>
          <p class="brand-title">Charted pay stories</p>
          <p class="muted">
            Built by Marwane Lachhab. Swap data, rerun animations, or plug these snippets straight into your stack.
          </p>
        </div>
      </div>
    </div>
    <div class="footer-actions">
      <a href="#hero" class="btn ghost">Back to top</a>
      <a href="#chart-gallery" class="btn primary">Jump to charts</a>
    </div>
  </footer>
</section>
